(()=>{"use strict";const e=({timing:e,draw:t,duration:l})=>{let a=performance.now();requestAnimationFrame((function o(s){let c=(s-a)/l;c>1&&(c=1);let r=e(c);t(r),c<1&&requestAnimationFrame(o)}))};((e,t,l="dot",a="active",o="dot-active",s="item-active")=>{let c,r=document.querySelector(e),n=document.querySelectorAll(t),i=document.querySelector(l),d=document.querySelectorAll(".item"),u=[],m=0,v=(e,t,l)=>{e[t].classList.remove(l)},y=(e,t,l)=>{e[t].classList.add(l)},p=()=>{v(n,m,a),v(d,m,s),v(u,m,o),m++,m>=n.length&&(m=0),y(n,m,a),y(d,m,s),y(u,m,o)},h=(e=1500)=>{c=setInterval(p,e),n.forEach(((e,t)=>{0===t&&e.classList.add(a)}))};"."===e[0]&&""!==e&&"."===t[0]&&""!==t&&(r.addEventListener("click",(e=>{e.preventDefault(),e.target.matches(".dot, .portfolio-btn")&&(v(n,m,a),v(u,m,o),v(d,m,s),e.target.matches("#arrow-right")?m++:e.target.matches("#arrow-left")?m--:e.target.classList.contains("dot")&&u.forEach(((t,l)=>{e.target===t&&(m=l)})),m>=n.length&&(m=0),m<0&&(m=n.length-1),y(n,m,a),y(u,m,o),y(d,m,s))})),r.addEventListener("mouseenter",(e=>{e.target.matches(".dot, .portfolio-btn")&&clearInterval(c)}),!0),r.addEventListener("mouseleave",(e=>{e.target.matches(".dot, .portfolio-btn")&&h(3e3)}),!0),n.forEach(((e,t)=>{let l=document.createElement("li");l.className=0===t?`dot ${o}`:"dot",i.append(l),u.push(l)})),h(3e3))})(".top-slider",".table",".dots"),((e,t,l="dot",a="active",o="dot-active")=>{let s=document.querySelector(e),c=document.querySelectorAll(t),r=0;"."===e[0]&&""!==e&&"."===t[0]&&""!==t&&s.addEventListener("click",(e=>{e.preventDefault(),((e,t,l)=>{if(0===t)for(let t=0;t<e.length/2;t++)e[t].classList.remove(l);else for(let t=3;t<e.length;t++)e[t].classList.remove(l)})(c,r,a),r=e.target.matches(".arrow-right")?1:(e.target.matches(".arrow-left"),0),((e,t,l)=>{if(1===t)for(let t=3;t<e.length;t++)e[t].classList.add(l);else for(let t=0;t<e.length/2;t++)e[t].classList.add(l)})(c,r,a)}))})(".services-arrow",".element.relative"),(()=>{let e=document.querySelector(".up");window.addEventListener("scroll",(()=>{document.documentElement.scrollTop>=600?e.classList.add("view"):e.classList.remove("view")}))})(),(()=>{let t=document.getElementById("form"),l=document.createElement("div"),a=e=>{e.value=e.value.replace(/\s+/," "),e.value=e.value.replace(/-+/,"-").replace(/\++/,"+"),e.value=e.value.replace(/(^[\s\-]+)/g,"").replace(/[\s\-]+$/g,"")},o=e=>{let t=!0;return e.forEach((e=>{e.classList.contains("success")||(t=!1,console.log(e))})),t};try{if(!t)throw new Error("Верните форму на место!");t.addEventListener("submit",(a=>{a.preventDefault(),(t=>{let a=t.querySelectorAll("input"),s=new FormData(t),c={};l.textContent="Идет отправка...",t.append(l),s.forEach(((e,t)=>{c[t]=e})),o(a)?(async e=>{const t=await fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}});return await t.json()})(c).then((t=>{let o=setInterval((()=>{l&&((({elemModal:e})=>{e(document.querySelector(".modal-callback"),document.querySelector(".modal-overlay"))})({elemModal(t,l){1==t.style.opacity&&e({duration:500,timing:e=>e,draw(e){t.style.opacity=1-e,0==t.style.opacity&&(t.style.display="none",l.style.display="none")}})}}),l.remove(),clearInterval(o))}),3e3);l.textContent="Спасибо! Наш менеджер с вами свяжется.",a.forEach((e=>{e.value=""}))})).catch((e=>{l.textContent="Ошибка"})):(console.log("error"),console.log(o(a)))})(t)})),t.addEventListener("input",(()=>{(e=>{let t=/[^А-Я\s-]/gi,l=/[^\d\+]/g,o=e.querySelector("[name='fio']"),s=e.querySelector("[name='tel']");t.test(o.value)||""===o.value?(o.classList.remove("success"),o.value=o.value.replace(t,"")):(a(o),o.classList.add("success"),o.value=o.value.replace(t,"")),l.test(s.value)||""===s.value?(s.classList.remove("success"),s.value=s.value.replace(l,"")):(a(s),s.classList.add("success"),s.value=s.value.replace(l,""))})(t)}))}catch(e){console.log(e.message)}})(),document.body.addEventListener("click",(t=>{const l=t.target;((e,t)=>{let l=t,a=document.getElementById("top");t.matches("ul>li>a")&&(e.preventDefault(),(e=>{let t=e.getAttribute("href").slice(1);document.getElementById(t).scrollIntoView({behavior:"smooth",block:"start"})})(l)),t.matches(".up")&&(e.preventDefault(),a.scrollIntoView({behavior:"smooth",block:"start"}))})(t,l),((t,l)=>{let a=document.querySelector(".modal-callback"),o=document.querySelector(".modal-overlay");if(l.matches(".callback-btn"))t.preventDefault(),a.style.display="block",o.style.display="block",e({duration:600,timing:e=>e,draw(e){a.style.opacity=e}});else{if(l.closest(".modal-callback")&&!l.closest(".modal-close>img"))return;1==a.style.opacity&&e({duration:500,timing:e=>e,draw(e){a.style.opacity=1-e,0==a.style.opacity&&(a.style.display="none",o.style.display="none")}})}if(l.matches(".img-wrapper"))t.preventDefault(),a.style.display="block",o.style.display="block",e({duration:600,timing:e=>e,draw(e){a.style.opacity=e}});else{if(!l.matches(".button-services"))return;t.preventDefault(),a.style.display="block",o.style.display="block",e({duration:600,timing:e=>e,draw(e){a.style.opacity=e}})}})(t,l),((e,t)=>{let l=document.querySelector(".accordeon"),a=l.querySelectorAll(".element"),o=l.querySelectorAll(".element-content");if(t.closest(".accordeon>.element")){let e=t.closest(".element");a.forEach(((t,l)=>{t===e?(t.classList.add("active"),o[l].classList.add("active")):(t.classList.remove("active"),o[l].classList.remove("active"))}))}})(0,l)}))})();