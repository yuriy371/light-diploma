(()=>{"use strict";const e=({timing:e,draw:t,duration:l})=>{let a=performance.now();requestAnimationFrame((function s(o){let c=(o-a)/l;c>1&&(c=1);let r=e(c);t(r),c<1&&requestAnimationFrame(s)}))};((e,t,l="dot",a="active",s="dot-active",o="item-active")=>{let c,r=document.querySelector(e),n=document.querySelectorAll(t),i=document.querySelector(l),d=document.querySelectorAll(".item"),m=[],u=0,v=(e,t,l)=>{e[t].classList.remove(l)},y=(e,t,l)=>{e[t].classList.add(l)},p=()=>{v(n,u,a),v(d,u,o),v(m,u,s),u++,u>=n.length&&(u=0),y(n,u,a),y(d,u,o),y(m,u,s)},h=(e=1500)=>{c=setInterval(p,e),n.forEach(((e,t)=>{0===t&&e.classList.add(a)}))};"."===e[0]&&""!==e&&"."===t[0]&&""!==t&&(r.addEventListener("click",(e=>{e.preventDefault(),e.target.matches(".dot, .portfolio-btn")&&(v(n,u,a),v(m,u,s),v(d,u,o),e.target.matches("#arrow-right")?u++:e.target.matches("#arrow-left")?u--:e.target.classList.contains("dot")&&m.forEach(((t,l)=>{e.target===t&&(u=l)})),u>=n.length&&(u=0),u<0&&(u=n.length-1),y(n,u,a),y(m,u,s),y(d,u,o))})),r.addEventListener("mouseenter",(e=>{e.target.matches(".dot, .portfolio-btn")&&clearInterval(c)}),!0),r.addEventListener("mouseleave",(e=>{e.target.matches(".dot, .portfolio-btn")&&h(3e3)}),!0),n.forEach(((e,t)=>{let l=document.createElement("li");l.className=0===t?`dot ${s}`:"dot",i.append(l),m.push(l)})),h(3e3))})(".top-slider",".table",".dots"),((e,t,l="dot",a="active",s="dot-active")=>{let o=document.querySelector(e),c=document.querySelectorAll(t),r=0;"."===e[0]&&""!==e&&"."===t[0]&&""!==t&&o.addEventListener("click",(e=>{e.preventDefault(),((e,t,l)=>{if(0===t)for(let t=0;t<e.length/2;t++)e[t].classList.remove(l);else for(let t=3;t<e.length;t++)e[t].classList.remove(l)})(c,r,a),r=e.target.matches(".arrow-right")?1:(e.target.matches(".arrow-left"),0),((e,t,l)=>{if(1===t)for(let t=3;t<e.length;t++)e[t].classList.add(l);else for(let t=0;t<e.length/2;t++)e[t].classList.add(l)})(c,r,a)}))})(".services-arrow",".element.relative"),(()=>{let e=document.querySelector(".up");window.addEventListener("scroll",(()=>{document.documentElement.scrollTop>=600?e.classList.add("view"):e.classList.remove("view")}))})(),(({formId:t})=>{let l=document.getElementById(t),a=document.documentElement.clientWidth,s=document.createElement("div"),o=e=>{e.value=e.value.replace(/\s+/," "),e.value=e.value.replace(/-+/,"-").replace(/\++/,"+"),e.value=e.value.replace(/(^[\s\-]+)/g,"").replace(/[\s\-]+$/g,"")};try{if(!l)throw new Error("Верните форму на место!");l.addEventListener("submit",(t=>{t.preventDefault(),(t=>{let l=t.querySelectorAll("input"),o=new FormData(t),c={};if(s.textContent="Идет отправка...",t.append(s),o.forEach(((e,t)=>{c[t]=e})),(e=>{let t=!0;return e.forEach((e=>{e.classList.contains("success")||""!==e.value||(t=!1)})),t})(l))(async e=>{const t=await fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}});return await t.json()})(c).then((t=>{let o=setInterval((()=>{s&&((({elemModal:e})=>{e(document.querySelector(".modal-callback"),document.querySelector(".modal-overlay"))})({elemModal(t,l){a<768?(clearInterval(e),t.style.opacity="",l.style.display="none"):1==t.style.opacity&&e({duration:500,timing:e=>e,draw(e){t.style.opacity=1-e,0==t.style.opacity&&(t.style.display="none",l.style.display="none")}})}}),s.remove(),clearInterval(o))}),3e3);s.textContent="Спасибо! Наш менеджер с вами свяжется.",l.forEach((e=>{e.value="",e.classList.remove("success")}))})).catch((e=>{s.textContent="Ошибка"}));else{let e=setInterval((()=>{s&&(s.remove(),clearInterval(e))}),3e3);s.textContent="Заполните все поля",console.log("error")}})(l)})),l.addEventListener("input",(()=>{(e=>{let t=/[^А-Я\s-]/gi,l=/[^\d\+]/g,a=e.querySelector("[name='fio']"),s=e.querySelector("[name='tel']");t.test(a.value)||""===a.value?(a.classList.remove("success"),a.value=a.value.replace(t,"")):(o(a),a.classList.add("success"),a.value=a.value.replace(t,"")),l.test(s.value)||""===s.value?(s.classList.remove("success"),s.value=s.value.replace(l,"")):(o(s),s.classList.add("success"),s.value=s.value.replace(l,""))})(l)}))}catch(e){console.log(e.message)}})({formId:"form"}),document.body.addEventListener("click",(t=>{const l=t.target;((e,t)=>{let l=t,a=document.getElementById("top");t.matches("ul>li>a")&&(e.preventDefault(),(e=>{let t=e.getAttribute("href").slice(1);document.getElementById(t).scrollIntoView({behavior:"smooth",block:"start"})})(l)),t.matches(".up")&&(e.preventDefault(),a.scrollIntoView({behavior:"smooth",block:"start"}))})(t,l),((t,l)=>{let a=document.querySelector(".modal-callback"),s=document.querySelector(".modal-overlay"),o=document.documentElement.clientWidth;if(l.matches(".callback-btn"))t.preventDefault(),a.style.display="block",s.style.display="block",o<768?(clearInterval(e),a.style.opacity=""):e({duration:600,timing:e=>e,draw(e){a.style.opacity=e}});else{if(l.closest(".modal-callback")&&!l.closest(".modal-close>img"))return;o<768?(clearInterval(e),a.style.opacity="",s.style.display="none"):1==a.style.opacity&&e({duration:500,timing:e=>e,draw(e){a.style.opacity=1-e,0==a.style.opacity&&(a.style.display="none",s.style.display="none")}})}if(l.matches(".img-wrapper"))t.preventDefault(),a.style.display="block",s.style.display="block",o<768?(clearInterval(e),a.style.opacity=""):e({duration:600,timing:e=>e,draw(e){a.style.opacity=e}});else{if(!l.matches(".button-services"))return;t.preventDefault(),a.style.display="block",s.style.display="block",o<768?(clearInterval(e),a.style.opacity=""):e({duration:600,timing:e=>e,draw(e){a.style.opacity=e}})}})(t,l),((e,t)=>{let l=document.querySelector(".accordeon"),a=l.querySelectorAll(".element"),s=l.querySelectorAll(".element-content");if(t.closest(".accordeon>.element")){let e=t.closest(".element");a.forEach(((t,l)=>{t===e?(t.classList.add("active"),s[l].classList.add("active")):(t.classList.remove("active"),s[l].classList.remove("active"))}))}})(0,l),((e,t)=>{let l=document.querySelector(".mobile-menu");t.closest(".mob-menu-btn")?l.classList.add("open"):t.closest(".mobile-menu-close")||t.closest(".overlay")?l.classList.remove("open"):t.matches("ul>li>a")?(e.preventDefault(),l.classList.remove("open")):t.matches(".callback-btn")&&l.classList.remove("open")})(t,l)}))})();